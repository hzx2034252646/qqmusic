webpackJsonp([9],{P9xt:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("lC5x"),r=e.n(n),s=e("J0Oq"),i=e.n(s),o=e("IHPB"),c=e.n(o),u=e("3cXf"),l=e.n(u),p=e("gyMJ"),d=e("biK0"),m=e("34jS"),g=e("iuKr"),v=e("KgXo"),f=e("ZLiS"),h={components:{appBar:d.a,Nav:m.a,album:g.a,loading:v.a,category:f.a},data:function(){return{nav:[{name:"最新",path:"/album?type=new"},{name:"最热",path:"/album?type=hot"}],album:[],tag:{},area:1,genre:-1,type:-1,year:-1,company:-1,page:0,loading:!1}},computed:{sort:function(){return"new"===this.$route.query.type?2:5},params:function(){return{albumlib:{method:"get_album_by_tags",param:{area:this.area,company:this.company,genre:this.genre,type:this.type,year:this.year,sort:this.sort,get_tags:1,sin:20*(this.page-1),num:19,click_albumid:0},module:"music.web_album_library"}}}},methods:{loadData:function(){var a=this;return this.page++,document.getElementById("app").removeEventListener("scroll",this.scroll),this.$jsonp(p.a.GET_MUSIC,{data:l()(this.params)}).then(function(t){var e=t.albumlib.data.list.map(function(a){return{id:a.album_mid,title:a.album_name,artist:a.singers.map(function(a){return a.singer_name}).join("、"),pic:"https://y.gtimg.cn/music/photo_new/T002R300x300M000"+a.album_mid+".jpg"}});a.album=[].concat(c()(a.album),c()(e)),!a.tag.area&&(a.tag=t.albumlib.data.tags),e.length>0&&document.getElementById("app").addEventListener("scroll",a.scroll)})},scroll:function(){var a=document.getElementById("app");a.scrollTop+a.offsetHeight>=a.scrollHeight&&this.album.length>0&&this.loadData()},setArea:function(a){var t=this;return i()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.area=a,t.page=0,t.album=[],t.loading=!0,e.next=6,t.loadData();case 6:t.loading=!1;case 7:case"end":return e.stop()}},e,t)}))()},setGenre:function(a){var t=this;return i()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.genre=a,t.page=0,t.album=[],t.loading=!0,e.next=6,t.loadData();case 6:t.loading=!1;case 7:case"end":return e.stop()}},e,t)}))()},setType:function(a){var t=this;return i()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.type=a,t.page=0,t.album=[],t.loading=!0,e.next=6,t.loadData();case 6:t.loading=!1;case 7:case"end":return e.stop()}},e,t)}))()},setYear:function(a){var t=this;return i()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.year=a,t.page=0,t.album=[],t.loading=!0,e.next=6,t.loadData();case 6:t.loading=!1;case 7:case"end":return e.stop()}},e,t)}))()},setCompany:function(a){var t=this;return i()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.company=a,t.page=0,t.album=[],t.loading=!0,e.next=6,t.loadData();case 6:t.loading=!1;case 7:case"end":return e.stop()}},e,t)}))()}},watch:{$route:function(){var a=this;return i()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.page=0,a.album=[],a.loading=!0,t.next=5,a.loadData();case 5:a.loading=!1;case 6:case"end":return t.stop()}},t,a)}))()}},mounted:function(){var a=this;return i()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.loading=!0,t.next=3,a.loadData();case 3:a.loading=!1;case 4:case"end":return t.stop()}},t,a)}))()},destroyed:function(){document.getElementById("app").removeEventListener("scroll",this.scroll)}},y={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{attrs:{id:"newAlbum"}},[e("app-bar",{attrs:{title:"专辑"}}),a._v(" "),e("Nav",{staticClass:"nav",attrs:{data:a.nav}}),a._v(" "),e("div",{staticClass:"divider"}),a._v(" "),a.tag.area?e("div",[e("category",{attrs:{data:a.tag.area,active:a.area,setActive:a.setArea}}),a._v(" "),e("category",{attrs:{data:a.tag.genre,active:a.genre,setActive:a.setGenre}}),a._v(" "),e("category",{attrs:{data:a.tag.type,active:a.type,setActive:a.setType}}),a._v(" "),e("category",{attrs:{data:a.tag.year,active:a.year,setActive:a.setYear}}),a._v(" "),e("category",{attrs:{data:a.tag.company,active:a.company,setActive:a.setCompany}})],1):a._e(),a._v(" "),e("album",{attrs:{data:a.album}}),a._v(" "),e("loading",{directives:[{name:"show",rawName:"v-show",value:a.loading,expression:"loading"}],staticStyle:{top:"60%"}})],1)},staticRenderFns:[]};var b=e("vSla")(h,y,!1,function(a){e("n1rG")},"data-v-6b38b192",null);t.default=b.exports},n1rG:function(a,t){}});