webpackJsonp([10],{E8fB:function(t,e){},rl7e:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("lC5x"),a=o.n(n),i=o("J0Oq"),c=o.n(i),m=o("IHPB"),r=o.n(m),_=o("gyMJ"),s=o("KgXo"),l=o("biK0"),d=o("lVAl"),h={components:{appBar:l.a,loading:s.a,comment:d.a},data:function(){return{loading_hot:!1,loading_new:!1,loadMore_hot:!1,loadMore_new:!1,page_hot:0,page_new:0,comment_hot:[],comment_hot_count:0,comment_new:[],comment_new_count:0}},computed:{topId:function(){return this.$route.params.id},type:function(){switch(this.$route.query.type){case"song":return 1;case"album":return 2;case"mv":return 5}}},methods:{load_hot_comment:function(){var t=this;return this.loadMore_hot=!1,this.loading_hot=!0,this.$jsonp(_.a.GET_COMMENT,{pagenum:this.page_hot++,biztype:this.type,cmd:6,topid:this.topId}).then(function(e){var o=e.comment.commentlist||[];return t.comment_hot=[].concat(r()(t.comment_hot),r()(o)),t.comment_hot_count=e.comment.commenttotal,t.comment_hot.length<10?(t.loadMore_hot=!1,void(t.loading_hot=!1)):!o||o.length<10?(t.loadMore_hot=!1,void(t.$refs.tip_hot.innerHTML="没有更多数据了")):(t.loadMore_hot=!0,void(t.loading_hot=!1))})},load_new_comment:function(){var t=this;return this.loadMore_new=!1,this.loading_new=!0,this.$jsonp(_.a.GET_COMMENT,{pagenum:this.page_new++,biztype:this.type,cmd:8,topid:this.topId}).then(function(e){var o=e.comment.commentlist||[];return t.comment_new=[].concat(r()(t.comment_new),r()(o)),t.comment_new_count=e.comment.commenttotal,t.comment_new.length<10?(t.loadMore_new=!1,void(t.loading_new=!1)):!o||o.length<10?(t.loadMore_new=!1,void(t.$refs.tip_new.innerHTML="没有更多数据了")):(t.loadMore_new=!0,void(t.loading_new=!1))})},loadData:function(){var t=this;return c()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.comment_hot=[],t.comment_new=[],t.page_hot=0,t.page_new=0,e.next=7,t.load_hot_comment();case 7:return e.next=9,t.load_new_comment();case 9:t.loading=!1;case 10:case"end":return e.stop()}},e,t)}))()}},watch:{$route:"loadData"},mounted:function(){this.loadData()}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"comment"}},[o("app-bar",{attrs:{title:"评论 "+t.comment_new_count,back:!0}}),t._v(" "),t.comment_new.length>0?o("div",[o("comment",{attrs:{data:t.comment_hot,title:"最热评论 "+t.comment_hot_count}}),t._v(" "),o("p",{directives:[{name:"show",rawName:"v-show",value:t.loadMore_hot,expression:"loadMore_hot"}],staticClass:"loadMore",on:{click:t.load_hot_comment}},[t._v("查看更多")]),t._v(" "),o("p",{directives:[{name:"show",rawName:"v-show",value:t.loading_hot,expression:"loading_hot"}],ref:"tip_hot",staticClass:"loading"},[t._v("正在加载...")]),t._v(" "),o("comment",{attrs:{data:t.comment_new,title:"最新评论 "+t.comment_new_count}}),t._v(" "),o("p",{directives:[{name:"show",rawName:"v-show",value:t.loadMore_new,expression:"loadMore_new"}],staticClass:"loadMore",on:{click:t.load_new_comment}},[t._v("查看更多")]),t._v(" "),o("p",{directives:[{name:"show",rawName:"v-show",value:t.loading_new,expression:"loading_new"}],ref:"tip_new",staticClass:"loading"},[t._v("正在加载...")])],1):o("loading")],1)},staticRenderFns:[]};var w=o("vSla")(h,u,!1,function(t){o("E8fB")},"data-v-6900f5cb",null);e.default=w.exports}});