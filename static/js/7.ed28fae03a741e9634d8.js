webpackJsonp([7],{Nebe:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("lC5x"),r=a.n(n),s=a("J0Oq"),i=a.n(s),c=a("IHPB"),o=a.n(c),d=a("3cXf"),l=a.n(d),u=a("gyMJ"),g=a("d0kq"),p=a("KgXo"),v=a("ZLiS"),f={components:{artist:g.a,loading:p.a,category:v.a},data:function(){return{tag:{},artist:[],page:0,index:-100,area:-100,sex:-100,genre:-100,loading:!1}},computed:{params:function(){return{comm:{ct:24,cv:1e4},singerList:{module:"Music.SingerListServer",method:"get_singer_list",param:{area:this.area,sex:this.sex,genre:this.genre,index:this.index,sin:80*(this.page-1),cur_page:this.page}}}}},methods:{loadData:function(){var t=this;return this.page++,document.getElementById("app").removeEventListener("scroll",this.scroll),this.$jsonp(u.a.GET_MUSIC,{data:l()(this.params)}).then(function(e){var a=e.singerList.data.singerlist.map(function(t){return{id:t.singer_mid,title:t.singer_name,pic:t.singer_pic}});t.artist=[].concat(o()(t.artist),o()(a)),!t.tag.index&&(t.tag=e.singerList.data.tags),a.length>0&&document.getElementById("app").addEventListener("scroll",t.scroll)})},scroll:function(){var t=document.getElementById("app");t.scrollTop+t.offsetHeight>=t.scrollHeight&&this.artist.length>0&&this.loadData()},setIndex:function(t){var e=this;return i()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.index=t,e.page=0,e.artist=[],e.loading=!0,a.next=6,e.loadData();case 6:e.loading=!1;case 7:case"end":return a.stop()}},a,e)}))()},setArea:function(t){var e=this;return i()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.area=t,e.page=0,e.artist=[],e.loading=!0,a.next=6,e.loadData();case 6:e.loading=!1;case 7:case"end":return a.stop()}},a,e)}))()},setSex:function(t){var e=this;return i()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.sex=t,e.page=0,e.artist=[],e.loading=!0,a.next=6,e.loadData();case 6:e.loading=!1;case 7:case"end":return a.stop()}},a,e)}))()},setGenre:function(t){var e=this;return i()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.genre=t,e.page=0,e.artist=[],e.loading=!0,a.next=6,e.loadData();case 6:e.loading=!1;case 7:case"end":return a.stop()}},a,e)}))()}},mounted:function(){var t=this;return i()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.loadData();case 3:t.loading=!1;case 4:case"end":return e.stop()}},e,t)}))()},activated:function(){document.getElementById("app").addEventListener("scroll",this.scroll)},deactivated:function(){document.getElementById("app").removeEventListener("scroll",this.scroll)}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"artist"}},[t.tag.index?a("div",[a("category",{attrs:{data:t.tag.index,active:t.index,setActive:t.setIndex}}),t._v(" "),a("category",{attrs:{data:t.tag.area,active:t.area,setActive:t.setArea}}),t._v(" "),a("category",{attrs:{data:t.tag.sex,active:t.sex,setActive:t.setSex}}),t._v(" "),a("category",{attrs:{data:t.tag.genre,active:t.genre,setActive:t.setGenre}})],1):t._e(),t._v(" "),a("artist",{attrs:{data:t.artist}}),t._v(" "),a("loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},staticRenderFns:[]},h=a("vSla")(f,m,!1,null,null,null);e.default=h.exports},d0kq:function(t,e,a){"use strict";var n={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"artist-list"},t._l(t.data,function(e,r){return n("div",{key:r,staticClass:"artist-list-item",on:{click:function(a){t.$router.push("/artist/"+e.id)}}},[n("div",{staticClass:"avatar"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:{src:e.pic,error:a("Zziw"),loading:a("Zziw")},expression:"{src: item.pic, error: require('../assets/img/person.png'), loading: require('../assets/img/person.png')}"}],attrs:{alt:""}})]),t._v(" "),n("div",{staticClass:"title"},[t._v(t._s(e.title))])])}))},staticRenderFns:[]};var r=a("vSla")({props:["data"]},n,!1,function(t){a("ua2B")},"data-v-056b9654",null);e.a=r.exports},ua2B:function(t,e){}});